<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.6.2" type="image/png" sizes="32x32"><meta name="description" content="MySql的基本使用">
<meta property="og:type" content="article">
<meta property="og:title" content="MySql">
<meta property="og:url" content="http://example.com/2021/08/26/mysql/index.html">
<meta property="og:site_name" content="一名菜鸡">
<meta property="og:description" content="MySql的基本使用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210806210118111.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807162632799.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807162909628.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807163332927.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807163514968.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807163751253.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807164001503.png">
<meta property="og:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210807164012578.png">
<meta property="article:published_time" content="2021-08-26T10:10:58.000Z">
<meta property="article:modified_time" content="2021-08-27T05:46:51.785Z">
<meta property="article:author" content="一名菜鸡">
<meta property="article:tag" content="MySql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/saihdow/images/raw/master/img/image-20210806210118111.png"><title>MySql | 一名菜鸡</title><link ref="canonical" href="http://example.com/2021/08/26/mysql/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  assistSearch: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"carbon","highlight":"dark","wordWrap":true},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"复制","copySuccess":"复制成功","copyError":"复制失败"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.4.0"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return false;"><span class="header-nav-menu-item__icon"><i class="fas fa-book-open"></i></span><span class="header-nav-menu-item__text">文章</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/archives/"><span class="header-nav-submenu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-submenu-item__text">归档</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/"><span class="header-nav-submenu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-submenu-item__text">分类</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/tags/"><span class="header-nav-submenu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-submenu-item__text">标签</span></a></div></div></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">一名菜鸡</div><div class="header-banner-info__subtitle">梦想即可启航，让青春绽放出最绚丽的光辉</div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">MySql</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-08-26</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-08-27</span></span><span class="post-meta-item post-meta-item--visitors"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">阅读次数</span><span class="post-meta-item__value" id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body">
        <h2 id="一、DDL-数据库操作"   >
          <a href="#一、DDL-数据库操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#一、DDL-数据库操作" class="headerlink" title="一、DDL,数据库操作"></a>一、DDL,数据库操作</h2>
      
        <h3 id="1-使用命令行操作-基本使用"   >
          <a href="#1-使用命令行操作-基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-使用命令行操作-基本使用" class="headerlink" title="1. 使用命令行操作  (基本使用)"></a>1. 使用命令行操作  (基本使用)</h3>
      <figure class="highlight plaintext"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">1. 连接mysql数据库</span><br><span class="line">	mysql -u用户名 -p密码</span><br><span class="line">	例如：mysql -uroot -p1213456</span><br><span class="line">	注意：-u 或者 -p 后面跟的账号密码都是没有空格的</span><br><span class="line">	</span><br><span class="line">2. 查看数据库列表</span><br><span class="line">	show databases;  </span><br><span class="line">	规范写法：SHOW DATABASES</span><br><span class="line">	</span><br><span class="line">3. 创建数据库</span><br><span class="line">	create database 数据库名称;</span><br><span class="line">	例如：create database mydata;</span><br><span class="line">	注意：此处的 database 没有 s</span><br><span class="line">	</span><br><span class="line">4. 查看正在使用的数据库</span><br><span class="line">	select database();</span><br><span class="line"></span><br><span class="line">5. 使用数据库</span><br><span class="line">	use 数据库名称;</span><br><span class="line">	例如：use mydata;</span><br><span class="line">	</span><br><span class="line">6. 查看当前数据库的表</span><br><span class="line">	show tables;</span><br><span class="line">	</span><br><span class="line">7. 创建数据表</span><br><span class="line">	create table 表名(该表需要的字段和字段类型);</span><br><span class="line">	例如：create table user(</span><br><span class="line">			name varchar(10),</span><br><span class="line">			height double,</span><br><span class="line">			age int</span><br><span class="line">		 );</span><br><span class="line">		 </span><br><span class="line">8. 查看数据表所有的字段与数据</span><br><span class="line">	select * from 表名;</span><br><span class="line">	例如：select * from user;</span><br><span class="line">	</span><br><span class="line">9. 向数据表插入数据</span><br><span class="line">	insert into 表名(需要插入的字段) values (添加插入字段数据);</span><br><span class="line">	例如：insert into user(name,age,height) values (&#x27;zs&#x27;,19,1.77);</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-使用-Navicat-操作数据库"   >
          <a href="#2-使用-Navicat-操作数据库" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-使用-Navicat-操作数据库" class="headerlink" title="2. 使用 Navicat 操作数据库"></a>2. 使用 Navicat 操作数据库</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 操作数据库</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 查询所有数据库</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 选择某个数据库</span></span><br><span class="line">USE hhhh;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 查看选择的数据库</span></span><br><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4. 创建数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE douyin;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 严谨的写法是需要加上条件，如果创建的不存在才进行创建，这样可以避免错误</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> douyin;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据库并且编辑字符集和排列顺序</span></span><br><span class="line"><span class="comment">-- DEFAULT CHARACTER SET  设置数据库字符集</span></span><br><span class="line"><span class="comment">-- COLLATE 设置数据库排序规则</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `huya` <span class="keyword">DEFAULT</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 删除数据库</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE `douyin`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 比较严谨的写法，加上条件</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> douyin;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6. 修改数据库的字符集和排序规则</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE hhhh <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_unicode_ci;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作数据表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 查看所有数据表</span></span><br><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 查看某个表结构</span></span><br><span class="line"><span class="keyword">DESC</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 创建数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student` (</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">	`age` <span class="type">INT</span>,</span><br><span class="line">	`score` <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4. 删除数据</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> moment;</span><br></pre></td></tr></table></div></figure>




        <h3 id="3-创建数据表（完整）即数据表其他操作"   >
          <a href="#3-创建数据表（完整）即数据表其他操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-创建数据表（完整）即数据表其他操作" class="headerlink" title="3. 创建数据表（完整）即数据表其他操作"></a>3. 创建数据表（完整）即数据表其他操作</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 创建表（完整方式）</span></span><br><span class="line"><span class="comment">-- INT 表示为整形   PRIMARY KEY  表示该字段为主键   AUTO_INCREMENT 表示该字段为自增</span></span><br><span class="line"><span class="comment">-- NOT NULL 表示不能该字段不能为 null   DEFAULT 0  表示该字段默认值为0</span></span><br><span class="line"><span class="comment">-- 下面加上 `` 表示不会把它当做关键字来进行解析</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `users` (</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">	phoneNum <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 修改数据表，表名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `原来表名` RENAME <span class="keyword">TO</span> `修改之后`;</span><br><span class="line">举例：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `users` RENAME <span class="keyword">TO</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 添加一个新的字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `表名` <span class="keyword">ADD</span> `添加的字段名` 字段名类型;</span><br><span class="line">举例：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` <span class="keyword">ADD</span> `createTime` DATETIME;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4. 修改数据表字段名称</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `表名` CHANGE `需要修改的字段名称` `修改后的字段名称` 修改后的字段类型;</span><br><span class="line">举例：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` CHANGE `phoneNum` `telPhone` <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 删除表结构某个字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `表名` <span class="keyword">DROP</span> `需要删除的字段名称`;</span><br><span class="line">举例：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` <span class="keyword">DROP</span> `age`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6. 修改表结构字段类型</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `表名` MODIFY `需要修改的字段名` 需要修改的类型;</span><br><span class="line">举例：<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` MODIFY `id` <span class="type">INT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7. 补充</span></span><br><span class="line"><span class="comment">-- 7.1 根据某个表结构去创建另外一张表（它不会复制该表的数据，但是会复制它表结构所有的内容，比如，主键，类型等等）</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `需要创建的表名` <span class="keyword">LIKE</span> `创建该表所依赖的数据表的名称`;</span><br><span class="line">举例：<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `user2` <span class="keyword">LIKE</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7.2 根据另外一张表的数据，来创建另外一张表（它会复制表数据，但是不会复制表结构，比如，主键）</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `需要创建的表名` (查询需要赋值的表内容的<span class="keyword">sql</span>语句);</span><br><span class="line">举例：<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `user3` (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span>);</span><br></pre></td></tr></table></div></figure>




        <h2 id="二、DML-对数据库进行增删改"   >
          <a href="#二、DML-对数据库进行增删改" class="heading-link"><i class="fas fa-link"></i></a><a href="#二、DML-对数据库进行增删改" class="headerlink" title="二、DML, 对数据库进行增删改"></a>二、DML, 对数据库进行增删改</h2>
      
        <h3 id="1-对数据库进行插入操作"   >
          <a href="#1-对数据库进行插入操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-对数据库进行插入操作" class="headerlink" title="1. 对数据库进行插入操作"></a>1. 对数据库进行插入操作</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 给数据表插入数据</span></span><br><span class="line"><span class="comment">-- 1.1 第一种插入数据方式， 直接写需要插入的数据，即可  （不推荐）</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="number">110</span>, <span class="string">&#x27;zs&#x27;</span>, <span class="string">&#x27;021-110110&#x27;</span>, <span class="string">&#x27;2021-08-06&#x27;</span>, <span class="string">&#x27;2022-10-10&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.2 插入数据，插入数据带上需要插入的字段名称 （推荐写法）</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (需要插入的字段名称) <span class="keyword">VALUES</span> (插入的数据，需要与插入的字段名对应);</span><br><span class="line">举例： <span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (id,`name`,telPhone,createTime,updateTime)</span><br><span class="line">						<span class="keyword">VALUES</span> (<span class="number">111</span>,<span class="string">&#x27;ls&#x27;</span>,<span class="string">&#x27;022-110110&#x27;</span>,<span class="string">&#x27;2021-08-10&#x27;</span>,<span class="string">&#x27;2022-11-10&#x27;</span>);</span><br><span class="line">						</span><br><span class="line"><span class="comment">-- 1.3 插入部分数据   id为进行递增 因为创建表时，id已设置为递增 如果可以为空的字段则没有添加则为null</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (`name`, telPhone) <span class="keyword">VALUES</span> (<span class="string">&#x27;ww&#x27;</span>, <span class="string">&#x27;023-110110&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 需求：createTime 和 updateTime 如果不进行插入，可以有默认值</span></span><br><span class="line"><span class="comment">-- 修改数据表</span></span><br><span class="line"><span class="comment">-- DEFAULT 默认值  CURRENT_TIMESTAMP 当前时间</span></span><br><span class="line"><span class="comment">-- ON 当发生  UPDATE  更新时   CURRENT_TIMESTAMP  当前时间</span></span><br><span class="line"><span class="comment">-- DEFAULT  默认值  CURRENT_TIMESTAMP  当前时间  ON  当发生  UPDATE  更新时  CURRENT_TIMESTAMP  当前时间</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` MODIFY createTime <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` MODIFY updateTime <span class="type">TIMESTAMP</span> <span class="keyword">ON</span> UPDATE <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` MODIFY updateTime <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> UPDATE <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.4 插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (`name`, telPhone) <span class="keyword">VALUES</span> (<span class="string">&#x27;wmz&#x27;</span>, <span class="string">&#x27;024-110110&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (`name`, telPhone) <span class="keyword">VALUES</span> (<span class="string">&#x27;pg&#x27;</span>, <span class="string">&#x27;025-110110&#x27;</span>);</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-对数据库进行删除操作"   >
          <a href="#2-对数据库进行删除操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-对数据库进行删除操作" class="headerlink" title="2. 对数据库进行删除操作"></a>2. 对数据库进行删除操作</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2. 删除数据</span></span><br><span class="line"><span class="comment">-- 2.1 删除该表中的所有数据，如果不写条件，则删除该表所有的数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `需要删除的数据表`;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.2 删除符合条件的数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `需要删除的数据表` <span class="keyword">WHERE</span> 删除的条件 <span class="operator">=</span> 需要条件满足的结果;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `<span class="keyword">user</span>` <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">110</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="3-对数据库进行修改操作"   >
          <a href="#3-对数据库进行修改操作" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-对数据库进行修改操作" class="headerlink" title="3. 对数据库进行修改操作"></a>3. 对数据库进行修改操作</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3. 更新数据</span></span><br><span class="line"><span class="comment">-- 如果不写条件，则修改该表的所有的字段数据</span></span><br><span class="line"><span class="comment">-- 3.1 修改所有数据                                  多个字段通过 ,  分割</span></span><br><span class="line">UPDATE `修改的数据表` <span class="keyword">SET</span> `需要修改的字段名称` <span class="operator">=</span> <span class="string">&#x27;修改的数据&#x27;</span>, telPhone <span class="operator">=</span> <span class="string">&#x27;000-111111&#x27;</span>;</span><br><span class="line">UPDATE `<span class="keyword">user</span>` <span class="keyword">SET</span> `name` <span class="operator">=</span> <span class="string">&#x27;hhh&#x27;</span>, telPhone <span class="operator">=</span> <span class="string">&#x27;000-111111&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.2 修改指定条件的数据</span></span><br><span class="line">UPDATE `<span class="keyword">user</span>` <span class="keyword">SET</span> name <span class="operator">=</span> <span class="string">&#x27;eee&#x27;</span>, telPhone <span class="operator">=</span> <span class="string">&#x27;111-000000&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">111</span>;</span><br></pre></td></tr></table></div></figure>




        <h2 id="三、DQL-数据库查询语句"   >
          <a href="#三、DQL-数据库查询语句" class="heading-link"><i class="fas fa-link"></i></a><a href="#三、DQL-数据库查询语句" class="headerlink" title="三、DQL, 数据库查询语句"></a>三、DQL, 数据库查询语句</h2>
      
        <h3 id="1-创建数据表"   >
          <a href="#1-创建数据表" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建数据表" class="headerlink" title="1. 创建数据表"></a>1. 创建数据表</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 创建一个数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `products` (</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	brand <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	title <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	price <span class="keyword">DOUBLE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	score <span class="type">DECIMAL</span>(<span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">	voteCnt <span class="type">INT</span>,</span><br><span class="line">	url <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">	pid <span class="type">INT</span></span><br><span class="line">);</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-基本查询"   >
          <a href="#2-基本查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-基本查询" class="headerlink" title="2. 基本查询"></a>2. 基本查询</h3>
      <p><code>*</code>  表示通配符，查询所有的字段即数据</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2. 基本查询语句</span></span><br><span class="line"><span class="comment">-- 2.1 查询当前表中所有的字段即数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.1 查询当前表指定字段即数据</span></span><br><span class="line"><span class="comment">-- 如果需要查询某些字段，但是它们是多个，用 , 进行分割，写多个需要查询的字段名称</span></span><br><span class="line"><span class="keyword">SELECT</span> title, price <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.3 给查询的字段结果起别名</span></span><br><span class="line"><span class="keyword">SELECT</span> title <span class="keyword">AS</span> phoneTitle, price <span class="keyword">AS</span> currentPrice <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 下面是起别名之后的展示结果</span></span><br></pre></td></tr></table></div></figure>

<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210806210118111.png" alt="image-20210806210118111"></p>

        <h3 id="3-where-条件查询"   >
          <a href="#3-where-条件查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-where-条件查询" class="headerlink" title="3. where 条件查询"></a>3. where 条件查询</h3>
      <p>条件查询会使用   <code>WEHRE </code>  关键字进行查询</p>

        <h4 id="3-1-where-比较运算符"   >
          <a href="#3-1-where-比较运算符" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-1-where-比较运算符" class="headerlink" title="3.1 where 比较运算符"></a>3.1 where 比较运算符</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.1 条件判断语句</span></span><br><span class="line"><span class="comment">-- 案例一：查询价格小于1000的手机</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">&lt;</span> <span class="number">1000</span>;</span><br><span class="line"><span class="comment">-- 案例二：查询价格等于999的手机</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">=</span> <span class="number">999</span>;</span><br><span class="line"><span class="comment">-- 案例三：查询价格不等于999的手机</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">!=</span> <span class="number">999</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">&lt;&gt;</span> <span class="number">999</span>;</span><br><span class="line"><span class="comment">-- 案例三：查询品牌是小米的手机</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;小米&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询多个结果  使用的是 in 关键字，可以跟上一个结果集，就可以匹配多个结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="keyword">IN</span> (<span class="string">&#x27;苹果&#x27;</span>, <span class="string">&#x27;小米&#x27;</span>);</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-2-where-逻辑运算查询"   >
          <a href="#3-2-where-逻辑运算查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-2-where-逻辑运算查询" class="headerlink" title="3.2 where 逻辑运算查询"></a>3.2 where 逻辑运算查询</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.2 逻辑运算语句</span></span><br><span class="line"><span class="comment">-- 案例一：查询1000到2000之间的手机</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">&gt;</span> <span class="number">1000</span> <span class="operator">&amp;&amp;</span> price <span class="operator">&lt;</span> <span class="number">2000</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">AND</span> price <span class="operator">&lt;</span> <span class="number">2000</span>;</span><br><span class="line"><span class="comment">-- 注意点  BETWEEN  和  AND  是包括等于的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">1099</span> <span class="keyword">AND</span> <span class="number">1999</span>;</span><br><span class="line"></span><br><span class="line"># 案例二：价格在<span class="number">5000</span>以上或者是品牌是小米的手机</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">&gt;</span> <span class="number">5000</span> <span class="operator">||</span> brand <span class="operator">=</span> <span class="string">&#x27;小米&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将某些值设置为null</span></span><br><span class="line">UPDATE products <span class="keyword">SET</span> url <span class="operator">=</span> <span class="keyword">NULL</span> <span class="keyword">WHERE</span> id <span class="operator">&gt;=</span> <span class="number">96</span> <span class="operator">&amp;&amp;</span> id <span class="operator">&lt;=</span> <span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 查询某个值为null</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> url <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 查询某个值不为null</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> url <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-3-where-模糊查询"   >
          <a href="#3-3-where-模糊查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-3-where-模糊查询" class="headerlink" title="3.3 where 模糊查询"></a>3.3 where 模糊查询</h4>
      <p>模糊查询使用  <code>LIKE</code>  关键字，结合两个特殊的符号</p>
<ul>
<li><p> <code>%</code>   表示匹配任意个的任意字符</p>
</li>
<li><p> <code>_</code>  表示匹配一个的任意字符，两条下划线就代表两个任意字符，以此类推</p>
</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.3 模糊查询</span></span><br><span class="line"><span class="comment">-- 案例一：查询所有以 v 开头的title</span></span><br><span class="line"><span class="comment">-- 注意：它是不区分大小写的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="string">&#x27;%v%&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="string">&#x27;%V%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 案例二：查询带 M 的title</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="string">&#x27;%m%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 案例二：查询带 m 的title，但是必须是第三个字符是 m</span></span><br><span class="line"><span class="comment">-- 注意点：下面的下划线是两条( _ _  =&gt; __ ) ，一条( _ )下划线代表是一个字符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="string">&#x27;__m%&#x27;</span>;</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-4-where-查询结果排序"   >
          <a href="#3-4-where-查询结果排序" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-4-where-查询结果排序" class="headerlink" title="3.4 where 查询结果排序"></a>3.4 where 查询结果排序</h4>
      <p>结果排序使用  <code>ORDER BY</code>  关键字，它有两个常用的值： </p>
<p><code>ASC</code>    升序排列</p>
<p><code>DESC</code>  降序排列</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.4 查询结果排序</span></span><br><span class="line"><span class="comment">-- 结果排列, 结果排列也可多次使用，用 ， 分割即可，比如下面的：首先先按照价格进行升序排列，然后再按照 score 进行降序排列</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> price <span class="operator">&gt;</span> <span class="number">1000</span> <span class="operator">&amp;&amp;</span> price <span class="operator">&lt;</span> <span class="number">2000</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> price <span class="keyword">ASC</span>, score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></div></figure>




        <h2 id="四、分页查询"   >
          <a href="#四、分页查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#四、分页查询" class="headerlink" title="四、分页查询"></a>四、分页查询</h2>
      <p>使用的关键字是  <code>offset</code>  <code>limit</code>  <code>page</code>  等字段进行分页查询</p>
<ul>
<li><p><code>offset</code>  <code>limit</code>  通常是搭配使用 (常用)， <code>page</code>  通常是固定查询数量的时候才会使用</p>
</li>
<li><p><code>limit</code>    每页显示的数量</p>
</li>
<li><p><code>offset</code>  显示的数据偏移量</p>
</li>
<li><p><code>page</code>       页码</p>
</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4. 分页查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products LIMIT <span class="number">20</span> <span class="keyword">OFFSET</span> <span class="number">0</span>;  <span class="comment">-- 查询的数据是 0 ~ 20</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products LIMIT <span class="number">20</span> <span class="keyword">OFFSET</span> <span class="number">20</span>; <span class="comment">-- 查询的数据是 21 ~ 40</span></span><br><span class="line"><span class="comment">-- 也可以进行连写： 表示 第一个为偏移量，第二个为查询数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products LIMIT <span class="number">40</span>, <span class="number">20</span>;  <span class="comment">-- 查询数据是 41 ~ 60</span></span><br></pre></td></tr></table></div></figure>




        <h2 id="五、聚合函数"   >
          <a href="#五、聚合函数" class="heading-link"><i class="fas fa-link"></i></a><a href="#五、聚合函数" class="headerlink" title="五、聚合函数"></a>五、聚合函数</h2>
      <p>聚合函数表示对  <code>值集合</code>  进行操作的组（集合）函数。</p>

        <h3 id="1-聚合函数的基本使用"   >
          <a href="#1-聚合函数的基本使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-聚合函数的基本使用" class="headerlink" title="1. 聚合函数的基本使用"></a>1. 聚合函数的基本使用</h3>
      <p>​    事实上聚合函数相当于默认将所有的数据分成了一组，下面就来演示默认情况的聚合函数</p>
<ul>
<li><code>SUM()</code>  函数用于求和</li>
<li><code>AVG()</code>  函数用于求平均值</li>
<li><code>MAX()</code>  函数用于求最大值</li>
<li><code>MIN()</code>  函数用于求最小值</li>
<li><code>COUNT()</code>  函数用于根据某些字段查询的个数总和，但是如果该字段为null，则会直接忽略</li>
<li><code>DISTINCT price</code>   用于过滤重复的数据，这里表示过滤掉重复的价格</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 聚合函数的使用   默认聚合函数</span></span><br><span class="line"><span class="comment">-- 1.1 求所有手机的总价格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(price) <span class="keyword">FROM</span> products;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(price) <span class="keyword">AS</span> totalPrice <span class="keyword">FROM</span> products;</span><br><span class="line"><span class="comment">-- 起别名时，关键字 AS 也是可以省略的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(price) totalPrice <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.2 求小米手机的总价格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(price) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;小米&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.3 求小米手机的总价格平均值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(price) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;小米&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.4 求手机的最高价格与最低价格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(price) <span class="keyword">FROM</span> products;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(price) <span class="keyword">FROM</span> products;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.5 求某个手机品牌的个数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;小米&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;锤子科技&#x27;</span>;</span><br><span class="line"><span class="comment">-- 在查询个数时，也可以进行指定，按哪个字段名进行查询，如果该字段名的值为null，则不会计入查询结果数量当中</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(url) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;锤子科技&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(price) <span class="keyword">FROM</span> products;</span><br><span class="line"><span class="comment">-- 在查询个数时，也可以进行指定操作，比如  DISTINCT price  就表示过滤掉价格相同的，这样查询的数量就会忽略掉价格相同的手机，只会计算价格不同的手机数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> price) <span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-GROUP-BY-的使用"   >
          <a href="#2-GROUP-BY-的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-GROUP-BY-的使用" class="headerlink" title="2. GROUP BY 的使用"></a>2. GROUP BY 的使用</h3>
      <ul>
<li>作用：将表以某种字段进行分类，从而对每个品牌的商品数量，平均值等等进行计算</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2. GROUP BY 的使用   </span></span><br><span class="line"><span class="comment">-- 注意点，如果使用默认的没有进行分组的数据表，求它的最大值，平均值等等，前面是无法添加它的title或者brand之类的东西，因为mysql并不知道它现在是属于哪个字段的，分组一般都是按相同的字段进行分组，所有才可以添加</span></span><br><span class="line"><span class="keyword">SELECT</span> brand, <span class="built_in">AVG</span>(price), <span class="built_in">COUNT</span>(<span class="operator">*</span>), <span class="built_in">MIN</span>(price), <span class="built_in">MAX</span>(price) <span class="keyword">FROM</span> products <span class="keyword">GROUP</span> <span class="keyword">BY</span> brand;</span><br></pre></td></tr></table></div></figure>




        <h3 id="3-HAVING-的使用"   >
          <a href="#3-HAVING-的使用" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-HAVING-的使用" class="headerlink" title="3. HAVING 的使用"></a>3. HAVING 的使用</h3>
      <ul>
<li><p>作用：  就是对分类之后的表，做进一步的做筛选</p>
</li>
<li><p><code>where </code>  是对整张表，进行筛选的</p>
</li>
<li><p>注意点：<code>where</code>  不能写在  <code>GROUP BY</code>  分类的后面的，但是可以写在分类之前</p>
</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3. HAVING 的使用</span></span><br><span class="line"><span class="comment">-- 错误写法：WHERE 是对整张表进行筛选的，它是无法对进行分组之后的表进行筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> brand, <span class="built_in">AVG</span>(score) <span class="keyword">FROM</span> products <span class="keyword">GROUP</span> <span class="keyword">BY</span> brand <span class="keyword">WHERE</span> score <span class="operator">&gt;</span> <span class="number">7.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 正确写法，使用 HAVING, 它是对分组之后的表进行筛选的</span></span><br><span class="line"><span class="keyword">SELECT</span> brand, <span class="built_in">AVG</span>(score) avgScore <span class="keyword">FROM</span> products <span class="keyword">GROUP</span> <span class="keyword">BY</span> brand <span class="keyword">HAVING</span> avgScore <span class="operator">&gt;</span> <span class="number">7.5</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 需求：求评分(scope) &gt; 7.5的手机平均价格</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(score) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> score <span class="operator">&gt;</span> <span class="number">7.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 需求改进：求评分 &gt; 7.5的手机，按照品牌分类之后的，平均价格</span></span><br><span class="line"><span class="comment">-- 1. 先筛选评分 &gt; 7.5 的所有手机</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> score <span class="operator">&gt;</span> <span class="number">7.5</span>;</span><br><span class="line"><span class="comment">-- 2. 再将筛选之后的，按品牌进行分类，在计算出平均价格</span></span><br><span class="line"><span class="comment">-- 注意点：WHERE 不能写在 GROUP BY 分类的后面，但是可以写在分类之前</span></span><br><span class="line"><span class="keyword">SELECT</span> brand, <span class="built_in">AVG</span>(price) <span class="keyword">FROM</span> products <span class="keyword">WHERE</span> score <span class="operator">&gt;</span> <span class="number">7.5</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> brand;</span><br></pre></td></tr></table></div></figure>




        <h2 id="六、联表查询"   >
          <a href="#六、联表查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#六、联表查询" class="headerlink" title="六、联表查询"></a>六、联表查询</h2>
      <p><code>PRIMARY KEY</code>  设置主键    <code>AUTO_INCREMENT</code>  让该字段递增</p>
<p>注意点：设置  <code>外键</code>  的时候，必须要  <code>先创建</code>  该字段，然后  <code>才能</code>  将该字段设置为  <code>外键</code></p>
<p><code>FOREIGN KEY(brand_id) </code>  设置外键，这里表示将 brand_id，设置为外键</p>
<p><code>REFERENCES brand(id)</code>  引用字段，这里表示的是引用   <code>brand</code>  该表的  <code>id</code>  字段 </p>

        <h3 id="1-数据准备和设置外键"   >
          <a href="#1-数据准备和设置外键" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-数据准备和设置外键" class="headerlink" title="1. 数据准备和设置外键"></a>1. 数据准备和设置外键</h3>
      <ul>
<li>创建表的同时，设置外键</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 0. 创建新表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> aaa (</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	website <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">	worldRank <span class="type">INT</span>,</span><br><span class="line"><span class="comment">-- 注意点：设置外键的时候，必须要先创建该字段，然后才能将该字段设置为外键</span></span><br><span class="line">    aaa <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY(aaa) <span class="keyword">REFERENCES</span> brand(id)</span><br><span class="line">);</span><br></pre></td></tr></table></div></figure>



<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 创建新表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> brand (</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	website <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">	worldRank <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 向该表插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> brand (`name`, website, worldRank) <span class="keyword">VALUES</span> (<span class="string">&#x27;华为&#x27;</span>, <span class="string">&#x27;www.huawei.com&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> brand (`name`, website, worldRank) <span class="keyword">VALUES</span> (<span class="string">&#x27;小米&#x27;</span>, <span class="string">&#x27;www.xiaomi.com&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> brand (`name`, website, worldRank) <span class="keyword">VALUES</span> (<span class="string">&#x27;苹果&#x27;</span>, <span class="string">&#x27;www.apple.com&#x27;</span>, <span class="number">8</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> brand (`name`, website, worldRank) <span class="keyword">VALUES</span> (<span class="string">&#x27;oppo&#x27;</span>, <span class="string">&#x27;www.oppo.com&#x27;</span>, <span class="number">12</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> brand (`name`, website, worldRank) <span class="keyword">VALUES</span> (<span class="string">&#x27;一加&#x27;</span>, <span class="string">&#x27;www.yijia.com&#x27;</span>, <span class="number">15</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> brand (`name`, website, worldRank) <span class="keyword">VALUES</span> (<span class="string">&#x27;三星&#x27;</span>, <span class="string">&#x27;www.sanxing.com&#x27;</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 给商品表添加字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products <span class="keyword">ADD</span> brand_id <span class="type">INT</span>;</span><br><span class="line"><span class="comment">-- 将该字段(brand_id) 设置为外键，并且引用与上面的创建的新表的 id，这样可以对外键进行约束</span></span><br><span class="line"><span class="comment">-- 下面表示的是 将 brand_id 设置为外键，并且将 brand 表中的 id 字段与其进行关联</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY(brand_id) <span class="keyword">REFERENCES</span> brand(id);</span><br><span class="line"><span class="comment">-- 给外键设置数据</span></span><br><span class="line">UPDATE products <span class="keyword">SET</span> brand_id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;华为&#x27;</span>;</span><br><span class="line">UPDATE products <span class="keyword">SET</span> brand_id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;小米&#x27;</span>;</span><br><span class="line">UPDATE products <span class="keyword">SET</span> brand_id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;苹果&#x27;</span>;</span><br><span class="line">UPDATE products <span class="keyword">SET</span> brand_id <span class="operator">=</span> <span class="number">4</span> <span class="keyword">WHERE</span> brand <span class="operator">=</span> <span class="string">&#x27;oppo&#x27;</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-修改外键关联时的action"   >
          <a href="#2-修改外键关联时的action" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-修改外键关联时的action" class="headerlink" title="2. 修改外键关联时的action"></a>2. 修改外键关联时的action</h3>
      <p>可以修改为如下的值</p>
<p> <code>RESTRICT</code>（默认属性）：当更新或删除某个记录时，会检查该记录是否有关联的外键记录，有的话会报错的， 不允许更新或删除； </p>
<p> <code>NO ACTION</code>  ：和RESTRICT是一致的，是在SQL标准中定义的； </p>
<p> <code>CASCADE</code>  ：当更新或删除某个记录时，会检查该记录是否有关联的外键记录，有的话： </p>
<p>​                       更新：那么会更新对应的记录； </p>
<p>​                       删除：那么关联的记录会被一起删除掉； </p>
<p>  <code>SET NULL</code>   当更新或删除某个记录时，会检查该记录是否有关联的外键记录，有的话，将对应的值设置为 NULL；</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4. 修改外键关联时的action值</span></span><br><span class="line"><span class="comment">-- 4.1 获取到目前外键的名称，就需要通过查看创建该表时的 SQL 语句了</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `products`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `products` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `brand` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `price` <span class="keyword">double</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `score` <span class="type">decimal</span>(<span class="number">2</span>,<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `voteCnt` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `url` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `pid` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `brand_id` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `brand_id` (`brand_id`),</span><br><span class="line"><span class="comment">-- 	 products_ibfk_1  这个就是外键名称了</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `products_ibfk_1` <span class="keyword">FOREIGN</span> KEY (`brand_id`) <span class="keyword">REFERENCES</span> `brand` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">109</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.2 删除之前的外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY products_ibfk_1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4.3 设置新外键，并且设置新的action</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> products <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY(brand_id) <span class="keyword">REFERENCES</span> brand(id) </span><br><span class="line">					 <span class="keyword">ON</span> UPDATE CASCADE </span><br><span class="line">					 <span class="comment">-- 删除的外键的action是最好不要改变它，使用默认的那种就可以了，因为如果改为了 CASCADE ，当外键关联的						被删除了，那么与之对应的所有数据都会被删除，所有，删除的action，就不用设置它，使用默认的就可以了</span></span><br><span class="line">					 <span class="comment">-- 默认的也是可以不用写的</span></span><br><span class="line">					 <span class="comment">-- ON DELETE RESTRICT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改外键关联的 id, 现在更新外键关联的 id 就不会报错了，并且关联的外键(brand_id)也会随之变化</span></span><br><span class="line">UPDATE brand <span class="keyword">SET</span> id <span class="operator">=</span> <span class="number">100</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="3-多表查询"   >
          <a href="#3-多表查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-多表查询" class="headerlink" title="3. 多表查询"></a>3. 多表查询</h3>
      
        <h4 id="3-1-默认查询方式"   >
          <a href="#3-1-默认查询方式" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-1-默认查询方式" class="headerlink" title="3.1 默认查询方式"></a>3.1 默认查询方式</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 使用默认的查询方式， 直接对两个表进行查询， 然后再对查询之后的组合数据，进行筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products, brand;</span><br><span class="line"><span class="comment">-- 对默认查询结果进行筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products, brand <span class="keyword">WHERE</span> products.brand_id <span class="operator">=</span> brand.id;</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-2-左连接"   >
          <a href="#3-2-左连接" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-2-左连接" class="headerlink" title="3.2 左连接"></a>3.2 左连接</h4>
      <p>如果希望获取到左表的所有数据就使用  <code>左连接</code>（<code>以左表为主</code>）</p>
<ul>
<li>这个时候就表示无论左边的表是否有对应的  <code>brand_id</code>  的值对应右边表的  <code>id</code>，左边的数据都会被查询出来；</li>
<li>这个也是开发中使用最多的情况，它的完整写法是<code>LEFT [OUTER] JOIN</code>，但是  <code>OUTER</code>  可以省略的；</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807162632799.png" alt="image-20210807162632799"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2.1 无论左表(products)中的brand_id 是否与右表(brand)的 id 字段是否与之对应，即使左表(products) 的brand_id 为null，左表(products) 所有数据都可以被查询出来，但是右表 (brand) 中，没有与之对应的数据是不会被查询出来的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id;</span><br></pre></td></tr></table></div></figure>

<p>如果我们查询的是左连接部分中，和右表无关的数据，即左表数据没有关联右表数据</p>
<ul>
<li>也非常简单，只需要加上一个条件即可：B表中的数据为空</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807162909628.png" alt="image-20210807162909628"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2.2 查询左表（products）中的brand_id 没有 与 右表（brand）的id 字段所对应的数据，对应的数据是无法被查询出来的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id <span class="keyword">WHERE</span> products.brand_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-3-右连接"   >
          <a href="#3-3-右连接" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-3-右连接" class="headerlink" title="3.3 右连接"></a>3.3 右连接</h4>
      <p>如果我们希望获取到的是右表所有的数据就可以使用 <code>右连接</code> （<code>以右表为主</code>）</p>
<ul>
<li>这个时候就表示无论左边的表中的<code>brand_id</code>是否有和右边表中的<code>id</code>对应，右边的数据都会被查询出来；</li>
<li>右连接在开发中没有左连接常用，它的完整写法是<code>RIGHT [OUTER] JOIN</code>，但是OUTER可以省略的；</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807163332927.png" alt="image-20210807163332927"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.1 无论左表(products)中的brand_id 是否与右表(brand)的 id 字段是否与之对应，</span></span><br><span class="line"><span class="comment">-- 即使右表（brand）的id没有与左表（products）brand_id 与之对应，右表（brand）所有的数据都可以被查询出来</span></span><br><span class="line"><span class="comment">-- 但是左表（products）中，没有与之对应的数据是不会被查询出来的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> brand.id <span class="operator">=</span> products.brand_id;</span><br></pre></td></tr></table></div></figure>

<p>如果我们查询的是右连接部分中，和左表无关的数据，即右表数据没有与左表数据所关联，</p>
<p>也就是查询左表中暂未与右表关联的左表所有数据</p>
<ul>
<li>也非常简单，只需要加上一个条件即可：A表中的数据为空；</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807163514968.png" alt="image-20210807163514968"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.2 查询左表（products）中的brand_id 没有与 右表（brand）的id 字段所对应的所有数据，</span></span><br><span class="line"><span class="comment">-- 显示的是右表（brand）没有 与左表（products）的brand_id   所对应的右表（brand）数据</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> brand.id <span class="operator">=</span> products.brand_id <span class="keyword">WHERE</span> products.brand_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-4-内连接"   >
          <a href="#3-4-内连接" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-4-内连接" class="headerlink" title="3.4 内连接"></a>3.4 内连接</h4>
      <ul>
<li>查询两张表所有关联数据，不包括没有关联的数据</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807163751253.png" alt="image-20210807163751253"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4.1 查询左表（products）的 brand_id 与 右表（brand）的 id 所有关联的所有数据</span></span><br><span class="line"><span class="comment">-- 没有进行关联的数据，是不会被查询出来的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id;</span><br><span class="line"><span class="comment">-- 下面写法的查询结果与上面一样</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products, brand <span class="keyword">WHERE</span> products.brand_id <span class="operator">=</span> brand.id;</span><br></pre></td></tr></table></div></figure>




        <h4 id="3-5-全连接"   >
          <a href="#3-5-全连接" class="heading-link"><i class="fas fa-link"></i></a><a href="#3-5-全连接" class="headerlink" title="3.5 全连接"></a>3.5 全连接</h4>
      <p>SQL规范中全连接是使用  <code>FULL JOIN</code>  ，但是MySQL中并没有对它的支持，我们需要使用  <code>UNION</code>  来实现</p>
<ul>
<li>就是将两个表直接进行关联，不管它们之间是否存在关联，两个表所有的数据都会被查询出来</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807164001503.png" alt="image-20210807164001503"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5.1 下面的全连接就是将两个表直接进行关联，不管它们之间是否存在关联，两个表所有的数据都会被查询出来</span></span><br><span class="line">(<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id)</span><br><span class="line">	<span class="keyword">UNION</span></span><br><span class="line">(<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 下面写法的查询结果与上面一样</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products, brand <span class="keyword">WHERE</span> products.brand_id <span class="operator">=</span> brand.id;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>查询两张表当中的，没有进行关联的数据<br>已经关联的数据，都不会被查询出来</li>
</ul>
<p><img src="https://gitee.com/saihdow/images/raw/master/img/image-20210807164012578.png" alt="image-20210807164012578"></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5.2 下面的全连接就是查询两个表当中的，没有进行关联的数据都会被查询出来</span></span><br><span class="line"><span class="comment">-- 已经关联的数据，都不会被查询出来</span></span><br><span class="line">(<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id <span class="keyword">WHERE</span> products.brand_id <span class="keyword">IS</span> <span class="keyword">NULL</span>)</span><br><span class="line">	<span class="keyword">UNION</span></span><br><span class="line">(<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> products <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> brand <span class="keyword">ON</span> products.brand_id <span class="operator">=</span> brand.id <span class="keyword">WHERE</span> products.brand_id <span class="keyword">IS</span> <span class="keyword">NULL</span>);</span><br></pre></td></tr></table></div></figure>




        <h2 id="七、多对多关系查询"   >
          <a href="#七、多对多关系查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#七、多对多关系查询" class="headerlink" title="七、多对多关系查询"></a>七、多对多关系查询</h2>
      
        <h3 id="1-创建数据表-1"   >
          <a href="#1-创建数据表-1" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-创建数据表-1" class="headerlink" title="1. 创建数据表"></a>1. 创建数据表</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 基本数据模拟</span></span><br><span class="line"><span class="comment">-- 1.1 创建students数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> students(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	age <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.2 创建courses数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> courses(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	price <span class="keyword">DOUBLE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向表中插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students (`name`,age) <span class="keyword">VALUES</span> (<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>);</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> courses (`name`,price) <span class="keyword">VALUES</span> (<span class="string">&#x27;语文&#x27;</span>, <span class="number">89.90</span>);</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.  创建以上两表的关系表，用于记录两表之间的引用关系</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> students_select_courses(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	student_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	course_id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY(student_id) <span class="keyword">REFERENCES</span> students(id) <span class="keyword">ON</span> UPDATE CASCADE,</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY(course_id) <span class="keyword">REFERENCES</span> courses(id) <span class="keyword">ON</span> UPDATE CASCADE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.1 为关系表添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students_select_courses (student_id, course_id) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">......	</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-根据条件查询"   >
          <a href="#2-根据条件查询" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-根据条件查询" class="headerlink" title="2. 根据条件查询"></a>2. 根据条件查询</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3. 查询需求</span></span><br><span class="line"><span class="comment">-- 3.1 查询所以有选课的学生，选择了哪些课程</span></span><br><span class="line"><span class="comment">-- 分析：这个条件相当就是要查询多张表的公共部分，那么久需要使用内连接来进行查询了</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.id stuId, stu.`name` stuName, stu.age stuAge, cs.id csId, cs.`name` csName, cs.price csPrice </span><br><span class="line"><span class="keyword">FROM</span> students stu</span><br><span class="line"><span class="keyword">JOIN</span> students_select_courses ssc <span class="keyword">ON</span> ssc.student_id <span class="operator">=</span> stu.id</span><br><span class="line"><span class="keyword">JOIN</span> courses cs <span class="keyword">ON</span> ssc.course_id <span class="operator">=</span> cs.id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.2 查询所有学生的选课情况</span></span><br><span class="line"><span class="comment">-- 分析：这个条件就需要将左表全部查询出来，就需要使用左连接</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.id stuId, stu.`name` stuName, stu.age stuAge, cs.id csId, cs.`name` csName, cs.price csPrice</span><br><span class="line"><span class="keyword">FROM</span> students stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> students_select_courses ssc <span class="keyword">ON</span> ssc.student_id <span class="operator">=</span> stu.id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> courses cs <span class="keyword">ON</span> cs.id <span class="operator">=</span> ssc.course_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.3 查询没有选课的学生</span></span><br><span class="line"><span class="comment">-- 分析：实则也是左连接，然后加上筛选条件</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.id stuId, stu.`name` stuName, stu.age stuAge, cs.id csId, cs.`name` csName, cs.price csPrice</span><br><span class="line"><span class="keyword">FROM</span> students stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> students_select_courses ssc <span class="keyword">ON</span> ssc.student_id <span class="operator">=</span> stu.id</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> courses cs <span class="keyword">ON</span> cs.id <span class="operator">=</span> ssc.course_id</span><br><span class="line"><span class="keyword">WHERE</span> ssc.student_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.3 查询哪些课程没有被选择</span></span><br><span class="line"><span class="comment">-- 分析：这个条件是要先将右表全部查询出来，在筛选出没有被选择的</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.id stuId, stu.`name` stuName, stu.age stuAge, cs.id csId, cs.`name` csName, cs.price csPrice</span><br><span class="line"><span class="keyword">FROM</span> students stu</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> students_select_courses ssc <span class="keyword">ON</span> ssc.student_id <span class="operator">=</span> stu.id</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> courses cs <span class="keyword">ON</span> cs.id <span class="operator">=</span> ssc.course_id</span><br><span class="line"><span class="keyword">WHERE</span> ssc.course_id <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.4 查询某一个学生选择了哪些课程</span></span><br><span class="line"><span class="comment">-- 分析：这个是需要先将选课的学生全部查询出来，也就是内连接，然后再进行筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.id stuId, stu.`name` stuName, stu.age stuAge, cs.id csId, cs.`name` csName, cs.price csPrice</span><br><span class="line"><span class="keyword">FROM</span> students stu</span><br><span class="line"><span class="keyword">JOIN</span> students_select_courses ssc <span class="keyword">ON</span> ssc.student_id <span class="operator">=</span> stu.id</span><br><span class="line"><span class="keyword">JOIN</span> courses cs <span class="keyword">ON</span> cs.id <span class="operator">=</span> ssc.course_id</span><br><span class="line"><span class="keyword">WHERE</span> stu.id <span class="operator">=</span> <span class="number">3</span></span><br></pre></td></tr></table></div></figure>




        <h2 id="八、对象与数组类型转换"   >
          <a href="#八、对象与数组类型转换" class="heading-link"><i class="fas fa-link"></i></a><a href="#八、对象与数组类型转换" class="headerlink" title="八、对象与数组类型转换"></a>八、对象与数组类型转换</h2>
      
        <h3 id="1-对象"   >
          <a href="#1-对象" class="heading-link"><i class="fas fa-link"></i></a><a href="#1-对象" class="headerlink" title="1. 对象"></a>1. 对象</h3>
      <p><code>JSON_OBJECT</code>  用于转换对象的，转换方式：一个key, 一个值</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 将联合类型的数据转换为对象 （一对多） </span></span><br><span class="line"><span class="comment">-- 比如，一个手机品牌信息，对应多个手机信息，就将这个品牌信息转换为一个对象，存放到手机信息当中</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	pds.id id, pds.title title, pds.price price, pds.url url,</span><br><span class="line">	<span class="built_in">JSON_OBJECT</span>(<span class="string">&#x27;id&#x27;</span>, bd.id, <span class="string">&#x27;name&#x27;</span>, bd.`name`, <span class="string">&#x27;website&#x27;</span>, bd.website) brand</span><br><span class="line"><span class="keyword">FROM</span> products pds</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> brand bd</span><br><span class="line"><span class="keyword">ON</span> pds.brand_id <span class="operator">=</span> bd.id;</span><br></pre></td></tr></table></div></figure>


        <h3 id="2-数组"   >
          <a href="#2-数组" class="heading-link"><i class="fas fa-link"></i></a><a href="#2-数组" class="headerlink" title="2. 数组"></a>2. 数组</h3>
      <p><code>JSON_ARRAYAGG</code>  用于将一个个对象存放到数组当中</p>
<p><code>JSON_ARRAY</code>  由于将一个个key 存入数组当中</p>
<p>这里为什么会使用  <code>GROUP BY</code>  呢？</p>
<p>因为多对多的情况下，会出现重复的数据，比如一个学生可以选择多门课程，此时这个学生就会出现多条记录，此时就需要使用  <code>GROUP BY</code>  对学生进行分组，那么一个学生就只会出现一次记录，再将该学生所选择的课程，转换为对象，再将对象存放到数组当中，即可</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2. 将查询到的数据，组织为对象，然后再放入数组当中 （多对多）</span></span><br><span class="line"><span class="comment">-- 比如：某一个学生，它可以选择多门课程信息，而这个课程信息，应该是一个对象，而课程信息可能存在多个，那么就需要存放到数组当中</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	stu.id id, stu.name name, stu.age age,</span><br><span class="line">	<span class="built_in">JSON_ARRAYAGG</span>(<span class="built_in">JSON_OBJECT</span>(<span class="string">&#x27;id&#x27;</span>, cs.id, <span class="string">&#x27;name&#x27;</span>, cs.name, <span class="string">&#x27;price&#x27;</span>, cs.price))</span><br><span class="line"><span class="keyword">FROM</span> students stu</span><br><span class="line"><span class="keyword">JOIN</span> students_select_courses ssc</span><br><span class="line"><span class="keyword">ON</span> stu.id <span class="operator">=</span> ssc.student_id</span><br><span class="line"><span class="keyword">JOIN</span> courses cs</span><br><span class="line"><span class="keyword">ON</span> cs.id <span class="operator">=</span> ssc.course_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> stu.id</span><br></pre></td></tr></table></div></figure>

</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">本文作者: </span><span class="copyright-author__value"><a href="http://example.com">一名菜鸡</a></span></div><div class="copyright-link"><span class="copyright-link__name">本文链接: </span><span class="copyright-link__value"><a href="http://example.com/2021/08/26/mysql/">http://example.com/2021/08/26/mysql/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">版权声明: </span><span class="copyright-notice__value">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> 许可协议。转载请注明出处！</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="http://example.com/tags/MySql/">MySql</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2021/08/26/hexo/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">Hexo快速入门</span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81DDL-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">
          一、DDL,数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">
          1. 使用命令行操作  (基本使用)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-Navicat-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">
          2. 使用 Navicat 操作数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8%EF%BC%88%E5%AE%8C%E6%95%B4%EF%BC%89%E5%8D%B3%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.</span> <span class="toc-text">
          3. 创建数据表（完整）即数据表其他操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81DML-%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="toc-number">2.</span> <span class="toc-text">
          二、DML, 对数据库进行增删改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">
          1. 对数据库进行插入操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">2.2.</span> <span class="toc-text">
          2. 对数据库进行删除操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">2.3.</span> <span class="toc-text">
          3. 对数据库进行修改操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81DQL-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.</span> <span class="toc-text">
          三、DQL, 数据库查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">3.1.</span> <span class="toc-text">
          1. 创建数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.</span> <span class="toc-text">
          2. 基本查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-where-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.</span> <span class="toc-text">
          3. where 条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-where-%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.3.1.</span> <span class="toc-text">
          3.1 where 比较运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-where-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.2.</span> <span class="toc-text">
          3.2 where 逻辑运算查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-where-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.3.</span> <span class="toc-text">
          3.3 where 模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-where-%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="toc-number">3.3.4.</span> <span class="toc-text">
          3.4 where 查询结果排序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.</span> <span class="toc-text">
          四、分页查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text">
          五、聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">
          1. 聚合函数的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-GROUP-BY-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">5.2.</span> <span class="toc-text">
          2. GROUP BY 的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-HAVING-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">5.3.</span> <span class="toc-text">
          3. HAVING 的使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.</span> <span class="toc-text">
          六、联表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87%E5%92%8C%E8%AE%BE%E7%BD%AE%E5%A4%96%E9%94%AE"><span class="toc-number">6.1.</span> <span class="toc-text">
          1. 数据准备和设置外键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BF%AE%E6%94%B9%E5%A4%96%E9%94%AE%E5%85%B3%E8%81%94%E6%97%B6%E7%9A%84action"><span class="toc-number">6.2.</span> <span class="toc-text">
          2. 修改外键关联时的action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.3.</span> <span class="toc-text">
          3. 多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E9%BB%98%E8%AE%A4%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">6.3.1.</span> <span class="toc-text">
          3.1 默认查询方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E5%B7%A6%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.3.2.</span> <span class="toc-text">
          3.2 左连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%8F%B3%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.3.3.</span> <span class="toc-text">
          3.3 右连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.3.4.</span> <span class="toc-text">
          3.4 内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-%E5%85%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.3.5.</span> <span class="toc-text">
          3.5 全连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">
          七、多对多关系查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8-1"><span class="toc-number">7.1.</span> <span class="toc-text">
          1. 创建数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.2.</span> <span class="toc-text">
          2. 根据条件查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">8.</span> <span class="toc-text">
          八、对象与数组类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.1.</span> <span class="toc-text">
          1. 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E7%BB%84"><span class="toc-number">8.2.</span> <span class="toc-text">
          2. 数组</span></a></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="https://gitee.com/saihdow/images/raw/master/img/u=1221387616,1143311449&amp;fm=26&amp;fmt=auto&amp;gp=0.webp" alt="avatar"></div><p class="sidebar-ov-author__text">一名正在努力的菜鸡</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/woshinibaba-hue" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://juejin.cn/user/2533727480325784" target="_blank" rel="noopener" data-popover="social.juejin" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">掘</span></a><a class="sidebar-ov-social-item" href="https://www.zhihu.com/people/xiao-qi-57-17-65" target="_blank" rel="noopener" data-popover="知乎" data-popover-pos="up"><span class="sidebar-ov-social-item__icon">SF</span></a><a class="sidebar-ov-social-item" href="https://twitter.com/" target="_blank" rel="noopener" data-popover="Twitter" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-twitter"></i></span></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="知识共享许可协议" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>一名菜鸡</span></div><div><span>由 <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> 强力驱动</span><span> v5.4.0</span><span class="footer__devider">|</span><span>主题 - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.6.2</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">访问人数</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">浏览总量</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div><div></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script></body></html>